ArticleEditor.add("plugin","definedlinks",{defaults:{items:!1},subscribe:{"popup.open":function(){if(!1!==this.opts.definedlinks.items){var t=this.app.popup.getStack(),e=t.getName();-1!==["link-create","link-edit"].indexOf(e)&&this._build(t)}}},_build:function(t){var e=(this.stack=t).getFormItem("text"),i=this.dom("<div>").addClass(this.prefix+"-form-item");this.$select=this._create(),i.append(this.$select),e.before(i)},_change:function(t){var e=this.dom(t.target).val(),i=this.opts.definedlinks.items[e],s=this.stack.getInput("text"),n=this.stack.getInput("url"),a=i.name,d=i.url;!1===i.url&&(a=d=""),s.val(a),n.val(d)},_create:function(){var t=this.opts.definedlinks.items,e=this.dom("<select>").addClass(this.prefix+"-form-select");e.on("change",this._change.bind(this));for(var i=0;i<t.length;i++){var s=t[i],n=this.dom("<option>");n.val(i),n.html(s.name),e.append(n)}return e}});